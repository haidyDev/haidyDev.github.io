<!doctype html>
<html lang="fi">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Demos | Heidi Maunu</title>

  <link rel="stylesheet" href="/assets/css/style.css">
</head>

<body>

  <!-- ======================
       Header / Navigation
  ======================= -->
  <header class="nav">
    <div class="container nav-inner">
      <div class="brand">
        <span class="name">Heidi Maunu</span>
        <span class="role">Power Platform / low-code student portfolio</span>
      </div>

      <nav class="nav-links">
        <a href="/index.html">Home</a>
        <a href="/projects.html">Projects</a>
        <a href="/about.html">About</a>
      </nav>
    </div>
  </header>

  <main class="hero">
    <div class="container">
      <section class="card" style="padding: 22px;">
        <h1>Demos</h1>
        <div id="filters" style="margin-top: 12px;">
          <p style="margin: 0 0 8px 0;">
            <strong>Filter:</strong>
            <button class="btn" id="showAllBtn" type="button" style="margin-left: 8px;">Show all</button>
          </p>
          <p id="category-filters" style="margin: 0 0 8px 0;"></p>
          <p id="tag-filters" style="margin: 0;"></p>
        </div>
        <div id="demos-root"></div>
      </section>
    </div>
  </main>

  <!-- ======================
       Footer
  ======================= -->
  <footer>
    <div class="container footer-inner">
      <span>© 2026 Heidi Maunu</span>

      <span class="footer-note">
        Power Platform · Low-code · Portfolio
      </span>

      <span class="footer-contact">
        📧
        <a href="mailto:heidi.maunu@gmail.com">
          heidi.maunu@gmail.com
        </a>
        &nbsp;·&nbsp;
        🔗
        <a href="https://www.linkedin.com/in/heidimaunu/" target="_blank" rel="noopener">
          LinkedIn
        </a>
      </span>
    </div>
  </footer>

  <script>
    (function () {
      var root = document.getElementById('demos-root');
      var categoryFiltersRoot = document.getElementById('category-filters');
      var tagFiltersRoot = document.getElementById('tag-filters');
      var showAllBtn = document.getElementById('showAllBtn');
      var categoryOrder = ['Low-code', 'Automation', 'Data', 'UX/UI', 'Architecture'];
      var state = {
        demos: [],
        category: null,
        tag: null
      };

      function renderDemoCard(demo) {
        var card = document.createElement('article');
        card.className = 'card';
        card.style.padding = '16px';
        card.style.marginTop = '12px';

        var title = document.createElement('h3');
        title.textContent = demo.title;

        var metaTop = document.createElement('p');
        metaTop.style.margin = '0 0 6px 0';
        metaTop.style.fontSize = '0.82rem';
        metaTop.style.color = 'var(--muted)';
        metaTop.textContent = demo.focus ? 'Focus: ' + demo.focus : '';

        var description = document.createElement('p');
        description.textContent = demo.description || '';

        var tagsRow = document.createElement('p');
        tagsRow.style.marginTop = '8px';

        (demo.tags || []).forEach(function (tag) {
          var badge = document.createElement('span');
          badge.textContent = tag;
          badge.style.display = 'inline-block';
          badge.style.fontSize = '0.78rem';
          badge.style.padding = '4px 8px';
          badge.style.marginRight = '6px';
          badge.style.marginBottom = '6px';
          badge.style.borderRadius = '999px';
          badge.style.border = '1px solid var(--line)';
          badge.style.background = 'rgba(255, 255, 255, 0.06)';
          tagsRow.appendChild(badge);
        });

        var stackRow = document.createElement('p');
        stackRow.style.marginTop = '8px';

        (demo.stack || []).forEach(function (item) {
          var badge = document.createElement('span');
          badge.textContent = item;
          badge.style.display = 'inline-block';
          badge.style.fontSize = '0.78rem';
          badge.style.padding = '4px 8px';
          badge.style.marginRight = '6px';
          badge.style.marginBottom = '6px';
          badge.style.borderRadius = '999px';
          badge.style.border = '1px solid var(--line)';
          badge.style.background = 'rgba(242, 210, 122, 0.18)';
          stackRow.appendChild(badge);
        });

        var levelRow = document.createElement('p');
        levelRow.style.margin = '4px 0 0 0';
        levelRow.style.fontSize = '0.82rem';
        levelRow.style.color = 'var(--muted)';
        levelRow.textContent = demo.level ? 'Level: ' + demo.level : '';

        var actions = document.createElement('p');
        var link = document.createElement('a');
        link.className = 'btn';
        link.href = demo.path;
        link.textContent = 'Open demo';
        actions.appendChild(link);

        card.appendChild(title);
        if (metaTop.textContent) {
          card.appendChild(metaTop);
        }
        card.appendChild(description);
        card.appendChild(tagsRow);
        if (stackRow.childNodes.length > 0) {
          card.appendChild(stackRow);
        }
        if (levelRow.textContent) {
          card.appendChild(levelRow);
        }
        card.appendChild(actions);

        return card;
      }

      function createFilterButton(label, onClick) {
        var btn = document.createElement('button');
        btn.className = 'btn';
        btn.type = 'button';
        btn.textContent = label;
        btn.style.marginRight = '8px';
        btn.style.marginBottom = '8px';
        btn.addEventListener('click', onClick);
        return btn;
      }

      function getQueryParams() {
        var params = new URLSearchParams(window.location.search);
        return {
          category: params.get('category'),
          tag: params.get('tag')
        };
      }

      function updateURLFromFilter() {
        var params = new URLSearchParams();

        if (state.category) {
          params.set('category', state.category);
        }

        if (state.tag) {
          params.set('tag', state.tag);
        }

        var query = params.toString();
        var url = window.location.pathname + (query ? '?' + query : '');
        window.history.pushState({}, '', url);
      }

      function applyFilterFromURL() {
        var params = getQueryParams();

        var hasCategory = state.demos.some(function (demo) {
          return demo.category === params.category;
        });
        var hasTag = state.demos.some(function (demo) {
          return (demo.tags || []).indexOf(params.tag) !== -1;
        });

        state.category = hasCategory ? params.category : null;
        state.tag = hasTag ? params.tag : null;
      }

      function getFilteredDemos() {
        return state.demos.filter(function (demo) {
          var categoryMatch = !state.category || demo.category === state.category;
          var tagMatch = !state.tag || (demo.tags || []).indexOf(state.tag) !== -1;
          return categoryMatch && tagMatch;
        });
      }

      function renderCategorySection(category, demos) {
        var section = document.createElement('section');
        section.style.marginTop = '20px';

        var heading = document.createElement('h2');
        heading.textContent = category;
        section.appendChild(heading);

        demos.forEach(function (demo) {
          section.appendChild(renderDemoCard(demo));
        });

        return section;
      }

      function updateFilterButtonStates() {
        var allButtons = document.querySelectorAll('#filters .btn');
        allButtons.forEach(function (button) {
          button.style.opacity = '0.85';
        });

        if (showAllBtn) {
          showAllBtn.style.opacity = state.category || state.tag ? '0.85' : '1';
        }

        var activeCategoryBtn = document.querySelector('[data-filter-type="category"][data-filter-value="' + state.category + '"]');
        if (activeCategoryBtn) {
          activeCategoryBtn.style.opacity = '1';
        }

        var activeTagBtn = document.querySelector('[data-filter-type="tag"][data-filter-value="' + state.tag + '"]');
        if (activeTagBtn) {
          activeTagBtn.style.opacity = '1';
        }
      }

      function renderDemos() {
        root.innerHTML = '';

        var filtered = getFilteredDemos();
        if (!filtered.length) {
          var empty = document.createElement('p');
          empty.textContent = 'No demos match the selected filter.';
          root.appendChild(empty);
          updateFilterButtonStates();
          return;
        }

        var grouped = filtered.reduce(function (acc, demo) {
          var key = demo.category || 'Other';
          if (!acc[key]) {
            acc[key] = [];
          }
          acc[key].push(demo);
          return acc;
        }, {});

        categoryOrder.forEach(function (category) {
          if (grouped[category] && grouped[category].length > 0) {
            root.appendChild(renderCategorySection(category, grouped[category]));
          }
        });

        Object.keys(grouped).forEach(function (category) {
          if (categoryOrder.indexOf(category) === -1) {
            root.appendChild(renderCategorySection(category, grouped[category]));
          }
        });

        updateFilterButtonStates();
      }

      function renderFilters() {
        categoryFiltersRoot.innerHTML = '';
        tagFiltersRoot.innerHTML = '';

        var categories = state.demos
          .map(function (demo) { return demo.category; })
          .filter(function (value, index, arr) { return value && arr.indexOf(value) === index; });

        var sortedCategories = categoryOrder
          .filter(function (category) { return categories.indexOf(category) !== -1; })
          .concat(categories.filter(function (category) { return categoryOrder.indexOf(category) === -1; }));

        if (sortedCategories.length > 0) {
          var categoryLabel = document.createElement('strong');
          categoryLabel.textContent = 'Categories: ';
          categoryFiltersRoot.appendChild(categoryLabel);
        }

        sortedCategories.forEach(function (category) {
          var btn = createFilterButton(category, function () {
            state.category = category;
            updateURLFromFilter();
            renderDemos();
          });
          btn.setAttribute('data-filter-type', 'category');
          btn.setAttribute('data-filter-value', category);
          categoryFiltersRoot.appendChild(btn);
        });

        var tags = state.demos.reduce(function (acc, demo) {
          (demo.tags || []).forEach(function (tag) {
            if (acc.indexOf(tag) === -1) {
              acc.push(tag);
            }
          });
          return acc;
        }, []).sort();

        if (tags.length > 0) {
          var tagLabel = document.createElement('strong');
          tagLabel.textContent = 'Tags: ';
          tagFiltersRoot.appendChild(tagLabel);
        }

        tags.forEach(function (tag) {
          var btn = createFilterButton(tag, function () {
            state.tag = tag;
            updateURLFromFilter();
            renderDemos();
          });
          btn.setAttribute('data-filter-type', 'tag');
          btn.setAttribute('data-filter-value', tag);
          tagFiltersRoot.appendChild(btn);
        });

        showAllBtn.addEventListener('click', function () {
          state.category = null;
          state.tag = null;
          updateURLFromFilter();
          renderDemos();
        });

        updateFilterButtonStates();
      }

      fetch('./demos.json', { credentials: 'same-origin' })
        .then(function (response) {
          if (!response.ok) {
            throw new Error(response.status + ' ' + response.statusText);
          }
          return response.json();
        })
        .then(function (demos) {
          state.demos = demos;
          applyFilterFromURL();
          renderFilters();
          renderDemos();
        })
        .catch(function (error) {
          console.warn('[demos] Failed to load demos.json', error);
        });
    })();
  </script>

  <script src="/assets/js/nav-active.js"></script>
</body>

</html>


