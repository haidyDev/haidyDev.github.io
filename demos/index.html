<!doctype html>
<html lang="fi">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Näytteet | Osaamisnäytteet dataan, automaatioon ja arkkitehtuuriin | Heidi Maunu</title>
  <meta name="description" content="Osaamisnäytteet rekrytoijalle: suodatettava demosivu data-, automaatio- ja arkkitehtuuriratkaisuista sekä low-code-ajattelusta.">
  <link rel="canonical" href="https://haidydev.github.io/demos/">
  <meta property="og:title" content="Näytteet | Osaamisnäytteet dataan, automaatioon ja arkkitehtuuriin | Heidi Maunu">
  <meta property="og:description" content="Osaamisnäytteet rekrytoijalle: suodatettava demosivu data-, automaatio- ja arkkitehtuuriratkaisuista sekä low-code-ajattelusta.">
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://haidydev.github.io/demos/">
  <meta property="og:image" content="https://haidydev.github.io/assets/images/cover.png">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Näytteet | Osaamisnäytteet dataan, automaatioon ja arkkitehtuuriin | Heidi Maunu">
  <meta name="twitter:description" content="Osaamisnäytteet rekrytoijalle: suodatettava demosivu data-, automaatio- ja arkkitehtuuriratkaisuista sekä low-code-ajattelusta.">
  <meta name="twitter:image" content="https://haidydev.github.io/assets/images/cover.png">

  <link rel="stylesheet" href="/assets/css/style.css">
</head>

<body>

  <!-- ======================
       Header / Navigation
  ======================= -->
  <header class="nav">
    <div class="container nav-inner">
      <div class="brand">
        <span class="name">Heidi Maunu</span>
        <span class="role">Power Platform / low-code student portfolio</span>
      </div>

      <nav class="nav-links">
        <a href="/index.html">Etusivu</a>
        <a href="/projects.html">Projektit</a>
        <a href="/demos/">Näytteet</a>
        <a href="/about.html">Minusta</a>
      </nav>
    </div>
  </header>

  <main class="hero">
    <div class="container">
      <section class="card" style="padding: 22px;">
        <div class="card" style="position: sticky; top: 0; z-index: 5; margin: 0 0 12px 0; padding: 10px 12px;">
          <strong>Heidi Maunu | Low-code &amp; Power Platform | Harjoitteluhaku</strong><br>
          <a href="https://www.linkedin.com/in/heidimaunu/" target="_blank" rel="noopener">LinkedIn</a>
          ·
          <a href="mailto:heidi.maunu@gmail.com">heidi.maunu@gmail.com</a>
        </div>
        <h1>Osaamisnäytteet</h1>
        <p>
          Alla konkreettisia teknisiä toteutuksia ja
          arkkitehtuuriajattelua kuvaavia näytteitä.
        </p>
        <div style="margin-top: 12px;">
          <label for="demoSearchInput"><strong>Search demos:</strong></label>
          <input id="demoSearchInput" type="search" placeholder="Search by title, tag, stack, focus..." style="margin-top: 8px; width: 100%; max-width: 460px; padding: 10px 12px; border: 1px solid var(--line); border-radius: 12px; background: rgba(255, 255, 255, 0.06); color: var(--text);">
        </div>
        <article class="card" style="margin-top: 12px; padding: 16px;">
          <h2>Osaamisnäytteet – ratkaisukeskeinen ajattelu</h2>
          <p style="margin-bottom: 0;">
            Nämä näytteet kuvaavat tapaani jäsentää ongelmia,
            rakentaa ratkaisuja ja yhdistää käyttöliittymä,
            automaatiot ja datalogiikka toimivaksi kokonaisuudeksi.
          </p>
          <p style="margin-bottom: 0;">
            Fokus ei ole yksittäisessä työkalussa,
            vaan ratkaisun toimivuudessa.
          </p>
        </article>
        <article class="card" style="margin-top: 12px; padding: 16px;">
          <h2>Ratkaisuprofiili</h2>
          <p style="margin-bottom: 0;">
            Rakennan käytännönläheisiä digitaalisia ratkaisuja
            yhdistämällä käyttöliittymän, automaation ja datan.
          </p>
          <p style="margin-bottom: 0;">
            Tavoitteena ei ole pelkkä toteutus,
            vaan toimiva kokonaisuus.
          </p>
        </article>
        <article id="start" class="card" style="margin-top: 12px; padding: 16px;">
          <h2>Aloita tästä</h2>
          <p>Jos sinulla on 2 minuuttia:</p>
          <p style="margin-bottom: 0;">
            👉 <a href="/demos/architecture/booking-system-before-after/" data-keep-query="true">Arkkitehtuuri-ajattelu</a><br>
            👉 <a href="/demos/automation/invoice-triage-flow/" data-keep-query="true">Automaatio</a><br>
            👉 <a href="/demos/data/json-transform-pipeline/" data-keep-query="true">Data &amp; logiikka</a>
          </p>
        </article>
        <article class="card" style="margin-top: 12px; padding: 16px;">
          <h2>Harjoitteluhaku</h2>
          <p>
            Etsin harjoittelupaikkaa (Power Platform / low-code),
            jossa pääsen rakentamaan käyttäjälähtöisiä sovelluksia
            ja automaatioita osana oikeita kokonaisuuksia.
          </p>
          <p style="margin-bottom: 0;">
            <a class="btn" href="mailto:heidi.maunu@gmail.com">Ota yhteyttä</a>
            <a class="btn" href="https://www.linkedin.com/in/heidimaunu/" target="_blank" rel="noopener">LinkedIn</a>
          </p>
        </article>
        <article class="card" style="margin-top: 12px; padding: 16px;">
          <h2>Mihin rooleihin osaamiseni sopii</h2>
          <p style="margin-bottom: 0;">
            • Power Platform kehittäjä (junior)<br>
            • Low-code ratkaisujen rakentaja<br>
            • Automaatio ja prosessikehitys<br>
            • Tuleva Solution Architect -suunta
          </p>
        </article>
        <article class="card" style="margin-top: 12px; padding: 16px;">
          <h2>Oppimisen suunta</h2>
          <p style="margin-bottom: 0;">
            Nykyinen fokus:<br>
            • Power Platform<br>
            • Low-code ratkaisut<br>
            • Automaatio ja data
          </p>
          <p style="margin-bottom: 0;">
            Seuraavaksi syvennän:<br>
            • Solution architecture<br>
            • Data modelling<br>
            • Enterprise-level design thinking
          </p>
        </article>
        <article class="card" style="margin-top: 12px; padding: 16px;">
          <h2>Miten rakennan ratkaisuja</h2>
          <p style="margin-bottom: 0;">
            1. Ymmärrä ongelma<br>
            2. Mallinna ratkaisu<br>
            3. Rakenna prototyyppi<br>
            4. Iteroi ja opi
          </p>
        </article>
        <section class="card" style="margin-top: 12px; padding: 16px;">
          <h2>Miten lähestyn ratkaisuja</h2>
          <p style="margin: 0;">
            <button class="btn" type="button" data-solution-category="Frontend/UI" data-solution-fallback="Frontend">🧩 Käyttöliittymä</button>
            <button class="btn" type="button" data-solution-category="Automation">⚙️ Automaatio</button>
            <button class="btn" type="button" data-solution-category="Architecture">🏗️ Arkkitehtuuri</button>
            <button class="btn" type="button" data-solution-category="Data">📊 Data &amp; logiikka</button>
          </p>
        </section>
        <div id="filters" style="margin-top: 12px;">
          <p style="margin: 0 0 8px 0;">
            <strong>Filter:</strong>
            <button class="btn" id="showAllBtn" type="button" style="margin-left: 8px;">Show all</button>
          </p>
          <p id="category-filters" style="margin: 0 0 8px 0;"></p>
          <p id="tag-filters" style="margin: 0;"></p>
        </div>
        <div id="comparison-panel"></div>
        <div id="demos-status" class="card" style="margin-top: 12px; padding: 14px; display: none;"></div>
        <div id="demos-root"></div>
      </section>
    </div>
  </main>

  <!-- ======================
       Footer
  ======================= -->
  <footer>
    <div class="container footer-inner">
      <span>© 2026 Heidi Maunu</span>

      <span class="footer-note">
        Power Platform · Low-code · Portfolio
      </span>

      <span class="footer-contact">
        📧
        <a href="mailto:heidi.maunu@gmail.com">
          heidi.maunu@gmail.com
        </a>
        &nbsp;·&nbsp;
        🔗
        <a href="https://www.linkedin.com/in/heidimaunu/" target="_blank" rel="noopener">
          LinkedIn
        </a>
      </span>
    </div>
  </footer>

  <script>
    (function () {
      var root = document.getElementById('demos-root');
      var comparisonPanel = document.getElementById('comparison-panel');
      var statusBox = document.getElementById('demos-status');
      var searchInput = document.getElementById('demoSearchInput');
      var categoryFiltersRoot = document.getElementById('category-filters');
      var tagFiltersRoot = document.getElementById('tag-filters');
      var showAllBtn = document.getElementById('showAllBtn');
      var solutionCategoryButtons = document.querySelectorAll('[data-solution-category]');
      var categoryOrder = ['Low-code', 'Automation', 'Data', 'UX/UI', 'Architecture'];
      var INTERACTION_KEY = 'portfolio_interactions';
      var SESSION_KEY = 'demos_session_state';
      var LAZY_BATCH_SIZE = 6;
      var state = {
        demos: [],
        category: null,
        tag: null,
        query: '',
        openPreviewPath: null,
        comparisonPaths: [],
        lastTrackedSearch: '',
        pinnedPath: null,
        pendingScrollY: null,
        hasRestoredScroll: false,
        scrollSaveTimer: null,
        lazy: {
          entries: [],
          renderedCount: 0,
          sectionMap: {},
          sentinel: null,
          observer: null
        }
      };

      function trackEvent(type, data) {
        try {
          var raw = localStorage.getItem(INTERACTION_KEY);
          var events = raw ? JSON.parse(raw) : [];
          if (!Array.isArray(events)) {
            events = [];
          }

          events.push({
            type: type,
            data: data || {},
            timestamp: Date.now()
          });

          if (events.length > 200) {
            events = events.slice(events.length - 200);
          }

          localStorage.setItem(INTERACTION_KEY, JSON.stringify(events));
        } catch (error) {
          // Fail silently: tracking must never break UX.
        }
      }

      function saveSessionState() {
        try {
          var payload = {
            category: state.category,
            tag: state.tag,
            query: state.query,
            openPreviewPath: state.openPreviewPath,
            scrollY: window.scrollY || window.pageYOffset || 0
          };
          localStorage.setItem(SESSION_KEY, JSON.stringify(payload));
        } catch (error) {
          // Fail silently.
        }
      }

      function loadSessionState() {
        try {
          var raw = localStorage.getItem(SESSION_KEY);
          if (!raw) return null;
          var parsed = JSON.parse(raw);
          return parsed && typeof parsed === 'object' ? parsed : null;
        } catch (error) {
          return null;
        }
      }

      function getRelatedDemos(currentDemo, allDemos) {
        return (allDemos || [])
          .filter(function (candidate) {
            return candidate.path !== currentDemo.path;
          })
          .map(function (candidate) {
            var score = 0;

            if ((candidate.category || '') === (currentDemo.category || '')) {
              score += 2;
            }

            var currentTags = currentDemo.tags || [];
            var candidateTags = candidate.tags || [];
            currentTags.forEach(function (tag) {
              if (candidateTags.indexOf(tag) !== -1) {
                score += 1;
              }
            });

            var currentStack = currentDemo.stack || [];
            var candidateStack = candidate.stack || [];
            currentStack.forEach(function (item) {
              if (candidateStack.indexOf(item) !== -1) {
                score += 1;
              }
            });

            return {
              demo: candidate,
              score: score
            };
          })
          .filter(function (item) {
            return item.score > 0;
          })
          .sort(function (a, b) {
            if (b.score !== a.score) {
              return b.score - a.score;
            }
            return (a.demo.title || '').localeCompare(b.demo.title || '');
          })
          .slice(0, 3)
          .map(function (item) {
            return item.demo;
          });
      }

      function renderDemoCard(demo) {
        var maturityLabels = {
          foundation: 'Perustaso',
          applied: 'Sovellettu',
          advanced: 'Edistynyt'
        };
        var card = document.createElement('article');
        card.className = 'card';
        card.style.padding = '16px';
        card.style.marginTop = '12px';
        card.style.cursor = 'pointer';
        card.setAttribute('data-demo-card', 'true');
        card.setAttribute('data-demo-path', demo.path);
        card.setAttribute('tabindex', '0');
        card.setAttribute('role', 'button');

        var title = document.createElement('h3');
        title.textContent = demo.title;

        var description = document.createElement('p');
        description.textContent = demo.description || '';
        var whyBlock = document.createElement('p');
        whyBlock.style.margin = '8px 0 0 0';
        whyBlock.style.fontSize = '0.85rem';
        whyBlock.style.color = 'var(--muted)';
        if (demo.why) {
          whyBlock.textContent = 'Miksi tämä demo on tehty: ' + demo.why;
        }

        var summaryRow = document.createElement('p');
        summaryRow.style.margin = '8px 0 0 0';

        if (demo.focus) {
          var focusLabel = document.createElement('span');
          focusLabel.textContent = 'Focus: ' + demo.focus;
          focusLabel.style.display = 'inline-block';
          focusLabel.style.fontSize = '0.78rem';
          focusLabel.style.padding = '4px 8px';
          focusLabel.style.marginRight = '6px';
          focusLabel.style.marginBottom = '6px';
          focusLabel.style.borderRadius = '999px';
          focusLabel.style.border = '1px solid var(--line)';
          focusLabel.style.background = 'rgba(242, 210, 122, 0.18)';
          summaryRow.appendChild(focusLabel);
        }

        if (demo.level) {
          var levelLabel = document.createElement('span');
          levelLabel.textContent = 'Level: ' + demo.level;
          levelLabel.style.display = 'inline-block';
          levelLabel.style.fontSize = '0.78rem';
          levelLabel.style.padding = '4px 8px';
          levelLabel.style.marginRight = '6px';
          levelLabel.style.marginBottom = '6px';
          levelLabel.style.borderRadius = '999px';
          levelLabel.style.border = '1px solid var(--line)';
          levelLabel.style.background = 'rgba(255, 255, 255, 0.06)';
          summaryRow.appendChild(levelLabel);
        }

        if (demo.maturity && maturityLabels[demo.maturity]) {
          var maturityLabel = document.createElement('span');
          maturityLabel.textContent = maturityLabels[demo.maturity];
          maturityLabel.style.display = 'inline-block';
          maturityLabel.style.fontSize = '0.78rem';
          maturityLabel.style.padding = '4px 8px';
          maturityLabel.style.marginRight = '6px';
          maturityLabel.style.marginBottom = '6px';
          maturityLabel.style.borderRadius = '999px';
          maturityLabel.style.border = '1px solid var(--line)';
          maturityLabel.style.background = 'rgba(255, 255, 255, 0.06)';
          summaryRow.appendChild(maturityLabel);
        }

        var stackLine = document.createElement('p');
        stackLine.style.margin = '6px 0 0 0';
        stackLine.style.fontSize = '0.82rem';
        stackLine.style.color = 'var(--muted)';
        if ((demo.stack || []).length > 0) {
          stackLine.textContent = 'Stack: ' + demo.stack.join(' • ');
        }

        var evidenceList = document.createElement('ul');
        evidenceList.style.margin = '8px 0 0 18px';
        evidenceList.style.padding = '0';
        evidenceList.style.fontSize = '0.82rem';
        evidenceList.style.color = 'var(--muted)';
        (demo.evidence || []).forEach(function (item) {
          var li = document.createElement('li');
          li.textContent = item;
          li.style.marginBottom = '2px';
          evidenceList.appendChild(li);
        });

        var tagsRow = document.createElement('p');
        tagsRow.style.marginTop = '8px';

        (demo.tags || []).forEach(function (tag) {
          var badge = document.createElement('span');
          badge.textContent = tag;
          badge.style.display = 'inline-block';
          badge.style.fontSize = '0.78rem';
          badge.style.padding = '4px 8px';
          badge.style.marginRight = '6px';
          badge.style.marginBottom = '6px';
          badge.style.borderRadius = '999px';
          badge.style.border = '1px solid var(--line)';
          badge.style.background = 'rgba(255, 255, 255, 0.06)';
          tagsRow.appendChild(badge);
        });

        var actions = document.createElement('p');
        actions.style.display = 'flex';
        actions.style.gap = '8px';
        actions.style.flexWrap = 'wrap';

        var link = document.createElement('a');
        link.className = 'btn';
        link.href = demo.path;
        link.setAttribute('data-keep-query', 'true');
        link.textContent = 'Open demo';
        link.addEventListener('click', function () {
          trackEvent('demo_link_click', {
            title: demo.title,
            path: demo.path,
            category: demo.category || ''
          });
        });
        actions.appendChild(link);

        var previewBtn = document.createElement('button');
        previewBtn.className = 'btn';
        previewBtn.type = 'button';
        previewBtn.textContent = state.openPreviewPath === demo.path ? 'Hide preview' : 'Preview';
        var previewId = 'preview-' + btoa(encodeURIComponent(demo.path)).replace(/[^a-zA-Z0-9]/g, '').toLowerCase();
        var isExpanded = state.openPreviewPath === demo.path;
        previewBtn.setAttribute('aria-expanded', isExpanded ? 'true' : 'false');
        previewBtn.setAttribute('aria-controls', previewId);
        previewBtn.addEventListener('click', function (event) {
          event.stopPropagation();
          togglePreview(demo.path, true);
        });
        actions.appendChild(previewBtn);

        var compareLabel = document.createElement('label');
        compareLabel.style.display = 'inline-flex';
        compareLabel.style.alignItems = 'center';
        compareLabel.style.gap = '6px';
        compareLabel.style.fontSize = '0.9rem';
        compareLabel.style.cursor = 'pointer';

        var compareCheckbox = document.createElement('input');
        compareCheckbox.type = 'checkbox';
        compareCheckbox.checked = state.comparisonPaths.indexOf(demo.path) !== -1;
        compareCheckbox.setAttribute('aria-label', 'Compare ' + demo.title);
        compareCheckbox.addEventListener('click', function (event) {
          event.stopPropagation();
        });
        compareCheckbox.addEventListener('change', function (event) {
          event.stopPropagation();
          toggleComparison(demo.path);
        });

        var compareText = document.createElement('span');
        compareText.textContent = 'Compare';

        compareLabel.appendChild(compareCheckbox);
        compareLabel.appendChild(compareText);
        actions.appendChild(compareLabel);

        var previewWrap = document.createElement('div');
        previewWrap.id = previewId;
        previewWrap.style.marginTop = '10px';
        previewWrap.style.border = '1px solid var(--line)';
        previewWrap.style.borderRadius = '12px';
        previewWrap.style.overflow = 'hidden';
        previewWrap.style.display = isExpanded ? 'block' : 'none';
        previewWrap.hidden = !isExpanded;
        previewWrap.setAttribute('aria-label', demo.title + ' preview panel');
        card.setAttribute('aria-expanded', isExpanded ? 'true' : 'false');
        card.setAttribute('aria-controls', previewId);

        if (isExpanded) {
          var previewEvidence = (demo.evidence || []).slice(0, 4);
          if (previewEvidence.length > 0) {
            var evidenceSection = document.createElement('div');
            evidenceSection.style.padding = '12px';
            evidenceSection.style.borderBottom = '1px solid var(--line)';

            var evidenceTitle = document.createElement('h4');
            evidenceTitle.style.margin = '0 0 8px 0';
            evidenceTitle.textContent = 'Mitä tämä osoittaa';
            evidenceSection.appendChild(evidenceTitle);

            var evidenceList = document.createElement('ul');
            evidenceList.style.margin = '0 0 0 18px';
            evidenceList.style.padding = '0';
            evidenceList.style.fontSize = '0.9rem';
            previewEvidence.forEach(function (item) {
              var li = document.createElement('li');
              li.textContent = item;
              evidenceList.appendChild(li);
            });

            evidenceSection.appendChild(evidenceList);
            previewWrap.appendChild(evidenceSection);
          }

          var iframe = document.createElement('iframe');
          iframe.src = demo.path;
          iframe.title = demo.title + ' preview';
          iframe.loading = 'lazy';
          iframe.style.width = '100%';
          iframe.style.height = '360px';
          iframe.style.border = '0';
          previewWrap.appendChild(iframe);

          var related = getRelatedDemos(demo, state.demos);
          if (related.length > 0) {
            var relatedSection = document.createElement('div');
            relatedSection.style.padding = '12px';
            relatedSection.style.borderTop = '1px solid var(--line)';

            var relatedTitle = document.createElement('h4');
            relatedTitle.style.margin = '0 0 8px 0';
            relatedTitle.textContent = 'Related demos';
            relatedSection.appendChild(relatedTitle);

            related.forEach(function (relatedDemo) {
              var miniCard = document.createElement('div');
              miniCard.className = 'card';
              miniCard.style.padding = '10px';
              miniCard.style.marginTop = '8px';

              var miniLink = document.createElement('a');
              miniLink.href = relatedDemo.path;
              miniLink.setAttribute('data-keep-query', 'true');
              miniLink.textContent = relatedDemo.title;
              miniCard.appendChild(miniLink);

              relatedSection.appendChild(miniCard);
            });

            previewWrap.appendChild(relatedSection);
          }
        }

        card.addEventListener('click', function (event) {
          if (event.target.closest('a, button, iframe, input, label')) {
            return;
          }
          togglePreview(demo.path, true);
        });

        card.addEventListener('keydown', function (event) {
          if (event.target !== card) {
            return;
          }

          if (event.key === 'Enter') {
            event.preventDefault();
            togglePreview(demo.path, true);
            return;
          }

          if (event.key === 'Escape') {
            if (state.openPreviewPath === demo.path) {
              event.preventDefault();
              closePreview(true, demo.path);
            }
            return;
          }

          if (event.key === 'ArrowDown') {
            event.preventDefault();
            moveFocusBetweenCards(card, 1);
            return;
          }

          if (event.key === 'ArrowUp') {
            event.preventDefault();
            moveFocusBetweenCards(card, -1);
          }
        });

        card.appendChild(title);
        card.appendChild(description);
        if (demo.why) {
          card.appendChild(whyBlock);
        }
        if (summaryRow.childNodes.length > 0) {
          card.appendChild(summaryRow);
        }
        if (stackLine.textContent) {
          card.appendChild(stackLine);
        }
        if (evidenceList.childNodes.length > 0) {
          card.appendChild(evidenceList);
        }
        card.appendChild(tagsRow);
        card.appendChild(actions);
        card.appendChild(previewWrap);
        appendCurrentQueryToLinks(card);

        return card;
      }

      function getDemoCards() {
        return Array.prototype.slice.call(document.querySelectorAll('[data-demo-card="true"]'));
      }

      function focusCardByPath(path) {
        var cards = getDemoCards();
        for (var i = 0; i < cards.length; i += 1) {
          if (cards[i].getAttribute('data-demo-path') === path) {
            cards[i].focus();
            break;
          }
        }
      }

      function moveFocusBetweenCards(currentCard, step) {
        var cards = getDemoCards();
        var currentIndex = cards.indexOf(currentCard);
        if (currentIndex === -1) return;

        var targetIndex = currentIndex + step;
        if (targetIndex < 0 || targetIndex >= cards.length) return;
        cards[targetIndex].focus();
      }

      function closePreview(restoreFocus, focusPath) {
        if (!state.openPreviewPath) return;
        state.openPreviewPath = null;
        state.pinnedPath = focusPath || null;
        saveSessionState();
        renderDemos();
        if (restoreFocus && focusPath) {
          focusCardByPath(focusPath);
        }
      }

      function togglePreview(path, restoreFocus) {
        var opening = state.openPreviewPath !== path;
        state.openPreviewPath = opening ? path : null;
        state.pinnedPath = path;
        saveSessionState();
        if (opening) {
          var previewDemo = state.demos.find(function (demo) { return demo.path === path; });
          trackEvent('preview_open', {
            title: previewDemo ? previewDemo.title : '',
            path: path
          });
        }
        renderDemos();
        if (restoreFocus) {
          focusCardByPath(path);
        }
      }

      function getSelectedComparisonDemos() {
        return state.comparisonPaths
          .map(function (path) {
            return state.demos.find(function (demo) { return demo.path === path; }) || null;
          })
          .filter(function (demo) { return !!demo; });
      }

      function toggleComparison(path) {
        var index = state.comparisonPaths.indexOf(path);
        if (index !== -1) {
          state.comparisonPaths.splice(index, 1);
          renderComparisonPanel();
          renderDemos();
          return;
        }

        if (state.comparisonPaths.length >= 3) {
          return;
        }

        state.comparisonPaths.push(path);
        renderComparisonPanel();
        renderDemos();
      }

      function renderComparisonPanel() {
        if (!comparisonPanel) return;
        comparisonPanel.innerHTML = '';

        var selected = getSelectedComparisonDemos();
        if (selected.length < 2) {
          return;
        }

        var card = document.createElement('section');
        card.className = 'card';
        card.style.marginTop = '12px';
        card.style.padding = '14px';

        var topRow = document.createElement('div');
        topRow.style.display = 'flex';
        topRow.style.justifyContent = 'space-between';
        topRow.style.alignItems = 'center';
        topRow.style.gap = '10px';
        topRow.style.flexWrap = 'wrap';

        var title = document.createElement('h3');
        title.style.margin = '0';
        title.textContent = 'Comparison';
        topRow.appendChild(title);

        var clearBtn = document.createElement('button');
        clearBtn.className = 'btn';
        clearBtn.type = 'button';
        clearBtn.textContent = 'Clear comparison';
        clearBtn.addEventListener('click', function () {
          state.comparisonPaths = [];
          renderComparisonPanel();
          renderDemos();
        });
        topRow.appendChild(clearBtn);

        var tableWrap = document.createElement('div');
        tableWrap.style.marginTop = '10px';
        tableWrap.style.overflowX = 'auto';

        var table = document.createElement('table');
        table.style.width = '100%';
        table.style.borderCollapse = 'collapse';
        table.style.fontSize = '0.9rem';

        var fields = [
          { label: 'Title', key: 'title' },
          { label: 'Focus', key: 'focus' },
          { label: 'Stack', key: 'stack' },
          { label: 'Category', key: 'category' },
          { label: 'Level', key: 'level' }
        ];

        fields.forEach(function (field) {
          var row = document.createElement('tr');

          var th = document.createElement('th');
          th.textContent = field.label;
          th.style.textAlign = 'left';
          th.style.padding = '8px';
          th.style.borderBottom = '1px solid var(--line)';
          th.style.verticalAlign = 'top';
          row.appendChild(th);

          selected.forEach(function (demo) {
            var td = document.createElement('td');
            td.style.padding = '8px';
            td.style.borderBottom = '1px solid var(--line)';
            td.style.verticalAlign = 'top';

            if (field.key === 'stack') {
              td.textContent = (demo.stack || []).join(' • ');
            } else {
              td.textContent = demo[field.key] || '';
            }
            row.appendChild(td);
          });

          table.appendChild(row);
        });

        tableWrap.appendChild(table);
        card.appendChild(topRow);
        card.appendChild(tableWrap);
        comparisonPanel.appendChild(card);
      }

      function appendCurrentQueryToLinks(container) {
        if (!container) return;

        var query = window.location.search;
        if (!query) return;

        var links = container.querySelectorAll('a[data-keep-query="true"]');
        links.forEach(function (anchor) {
          var href = anchor.getAttribute('href');
          if (!href) return;

          var url = new URL(href, window.location.origin);
          var params = new URLSearchParams(query);
          params.forEach(function (value, key) {
            url.searchParams.set(key, value);
          });

          anchor.setAttribute('href', url.pathname + (url.search ? url.search : '') + (url.hash ? url.hash : ''));
        });
      }

      function createFilterButton(label, onClick) {
        var btn = document.createElement('button');
        btn.className = 'btn';
        btn.type = 'button';
        btn.textContent = label;
        btn.style.marginRight = '8px';
        btn.style.marginBottom = '8px';
        btn.addEventListener('click', onClick);
        return btn;
      }

      function getQueryParams() {
        var params = new URLSearchParams(window.location.search);
        return {
          category: params.get('category'),
          tag: params.get('tag'),
          q: params.get('q')
        };
      }

      function updateURLFromFilter() {
        var params = new URLSearchParams();

        if (state.category) {
          params.set('category', state.category);
        }

        if (state.tag) {
          params.set('tag', state.tag);
        }

        if (state.query) {
          params.set('q', state.query);
        }

        var query = params.toString();
        var url = window.location.pathname + (query ? '?' + query : '');
        window.history.pushState({}, '', url);
        saveSessionState();
      }

      function applyFilterFromURL() {
        var params = getQueryParams();

        var hasCategory = state.demos.some(function (demo) {
          return demo.category === params.category;
        });
        var hasTag = state.demos.some(function (demo) {
          return (demo.tags || []).indexOf(params.tag) !== -1;
        });

        state.category = hasCategory ? params.category : null;
        state.tag = hasTag ? params.tag : null;
        state.query = (params.q || '').trim();

        if (searchInput) {
          searchInput.value = state.query;
        }
      }

      function hasURLDrivenState() {
        var params = getQueryParams();
        return !!(params.category || params.tag || params.q);
      }

      function applySavedSessionState(saved) {
        if (!saved) return;

        if (!hasURLDrivenState()) {
          state.category = saved.category || null;
          state.tag = saved.tag || null;
          state.query = (saved.query || '').trim();
          if (searchInput) {
            searchInput.value = state.query;
          }
        }

        if (saved.openPreviewPath) {
          state.openPreviewPath = saved.openPreviewPath;
          state.pinnedPath = saved.openPreviewPath;
        }

        if (typeof saved.scrollY === 'number' && saved.scrollY >= 0) {
          state.pendingScrollY = saved.scrollY;
          state.hasRestoredScroll = false;
        }
      }

      function restoreScrollPositionIfNeeded() {
        if (state.hasRestoredScroll) return;
        if (typeof state.pendingScrollY !== 'number') return;

        state.hasRestoredScroll = true;
        var y = state.pendingScrollY;
        state.pendingScrollY = null;

        window.requestAnimationFrame(function () {
          window.scrollTo(0, y);
        });
      }

      function bindScrollPersistence() {
        window.addEventListener('scroll', function () {
          if (state.scrollSaveTimer) {
            return;
          }

          state.scrollSaveTimer = window.setTimeout(function () {
            state.scrollSaveTimer = null;
            saveSessionState();
          }, 200);
        }, { passive: true });
      }

      function getFilteredDemos() {
        var normalizedQuery = state.query.toLowerCase();

        return state.demos.filter(function (demo) {
          var categoryMatch = !state.category || demo.category === state.category;
          var tagMatch = !state.tag || (demo.tags || []).indexOf(state.tag) !== -1;

          var searchText = [
            demo.title || '',
            demo.description || '',
            (demo.tags || []).join(' '),
            (demo.stack || []).join(' '),
            demo.focus || '',
            demo.category || ''
          ].join(' ').toLowerCase();
          var searchMatch = !normalizedQuery || searchText.indexOf(normalizedQuery) !== -1;

          return categoryMatch && tagMatch && searchMatch;
        });
      }

      function renderCategorySection(category, demos) {
        var section = document.createElement('section');
        section.style.marginTop = '20px';

        var heading = document.createElement('h2');
        heading.textContent = category;
        section.appendChild(heading);

        demos.forEach(function (demo) {
          section.appendChild(renderDemoCard(demo));
        });

        return section;
      }

      function disconnectLazyObserver() {
        if (state.lazy.observer) {
          state.lazy.observer.disconnect();
          state.lazy.observer = null;
        }
      }

      function buildOrderedEntries(filtered) {
        var featured = filtered.filter(function (demo) {
          return demo.featured === true;
        });
        var nonFeatured = filtered.filter(function (demo) {
          return demo.featured !== true;
        });
        var grouped = nonFeatured.reduce(function (acc, demo) {
          var key = demo.category || 'Other';
          if (!acc[key]) {
            acc[key] = [];
          }
          acc[key].push(demo);
          return acc;
        }, {});

        var orderedCategories = categoryOrder
          .filter(function (category) { return grouped[category] && grouped[category].length > 0; })
          .concat(Object.keys(grouped).filter(function (category) { return categoryOrder.indexOf(category) === -1; }));

        var entries = [];
        featured.forEach(function (demo) {
          entries.push({ category: 'Featured demos', demo: demo });
        });
        orderedCategories.forEach(function (category) {
          grouped[category].forEach(function (demo) {
            entries.push({ category: category, demo: demo });
          });
        });

        return entries;
      }

      function ensureLazySection(category) {
        if (state.lazy.sectionMap[category]) {
          return state.lazy.sectionMap[category];
        }

        var section = document.createElement('section');
        section.style.marginTop = '20px';

        var heading = document.createElement('h2');
        heading.textContent = category;
        section.appendChild(heading);

        state.lazy.sectionMap[category] = section;
        root.appendChild(section);
        return section;
      }

      function renderNextLazyBatch(batchSize) {
        var limit = Math.min(state.lazy.renderedCount + batchSize, state.lazy.entries.length);
        for (var i = state.lazy.renderedCount; i < limit; i += 1) {
          var entry = state.lazy.entries[i];
          var section = ensureLazySection(entry.category);
          section.appendChild(renderDemoCard(entry.demo));
        }
        state.lazy.renderedCount = limit;

        if (state.lazy.sentinel) {
          if (state.lazy.renderedCount >= state.lazy.entries.length) {
            state.lazy.sentinel.remove();
            state.lazy.sentinel = null;
            disconnectLazyObserver();
          } else if (!root.contains(state.lazy.sentinel)) {
            root.appendChild(state.lazy.sentinel);
          }
        }
      }

      function setupLazyObserver() {
        disconnectLazyObserver();

        if (!('IntersectionObserver' in window)) {
          renderNextLazyBatch(state.lazy.entries.length);
          return;
        }

        state.lazy.observer = new IntersectionObserver(function (entries) {
          entries.forEach(function (entry) {
            if (entry.isIntersecting) {
              renderNextLazyBatch(LAZY_BATCH_SIZE);
            }
          });
        }, {
          root: null,
          rootMargin: '200px 0px',
          threshold: 0.01
        });

        if (state.lazy.sentinel) {
          state.lazy.observer.observe(state.lazy.sentinel);
        }
      }

      function startLazyRender(filtered) {
        root.innerHTML = '';
        disconnectLazyObserver();

        state.lazy.entries = buildOrderedEntries(filtered);
        state.lazy.renderedCount = 0;
        state.lazy.sectionMap = {};
        state.lazy.sentinel = document.createElement('div');
        state.lazy.sentinel.setAttribute('aria-hidden', 'true');
        state.lazy.sentinel.style.height = '1px';

        var initialCount = LAZY_BATCH_SIZE;
        var keepPath = state.openPreviewPath || state.pinnedPath;
        if (keepPath) {
          var pinnedIndex = state.lazy.entries.findIndex(function (entry) {
            return entry.demo.path === keepPath;
          });
          if (pinnedIndex >= 0) {
            initialCount = Math.max(initialCount, pinnedIndex + 1);
          }
        }

        renderNextLazyBatch(initialCount);
        setupLazyObserver();
      }

      function updateFilterButtonStates() {
        var allButtons = document.querySelectorAll('#filters .btn');
        allButtons.forEach(function (button) {
          button.style.opacity = '0.85';
        });

        if (showAllBtn) {
          showAllBtn.style.opacity = state.category || state.tag ? '0.85' : '1';
        }

        var activeCategoryBtn = document.querySelector('[data-filter-type="category"][data-filter-value="' + state.category + '"]');
        if (activeCategoryBtn) {
          activeCategoryBtn.style.opacity = '1';
        }

        var activeTagBtn = document.querySelector('[data-filter-type="tag"][data-filter-value="' + state.tag + '"]');
        if (activeTagBtn) {
          activeTagBtn.style.opacity = '1';
        }
      }

      function resetAllFilters() {
        state.category = null;
        state.tag = null;
        state.query = '';

        if (searchInput) {
          searchInput.value = '';
        }

        updateURLFromFilter();
      }

      function showLoadingState() {
        root.innerHTML = '';
        statusBox.style.display = 'block';
        statusBox.innerHTML = '<p style="margin: 0;">Loading demos...</p>';
      }

      function showEmptyState() {
        root.innerHTML = '';
        statusBox.style.display = 'block';
        statusBox.innerHTML = '';

        var message = document.createElement('p');
        message.style.margin = '0';
        message.textContent = 'No demos match current filters.';
        statusBox.appendChild(message);

        var actions = document.createElement('p');
        actions.style.margin = '10px 0 0 0';

        var resetBtn = document.createElement('button');
        resetBtn.className = 'btn';
        resetBtn.type = 'button';
        resetBtn.textContent = 'Reset filters';
        resetBtn.addEventListener('click', function () {
          resetAllFilters();
          renderDemos();
        });
        actions.appendChild(resetBtn);

        statusBox.appendChild(actions);
      }

      function hideStatusState() {
        statusBox.style.display = 'none';
        statusBox.innerHTML = '';
      }

      function renderDemos() {
        root.innerHTML = '';
        renderComparisonPanel();

        var filtered = getFilteredDemos();
        if (!filtered.length) {
          showEmptyState();
          updateFilterButtonStates();
          return;
        }

        hideStatusState();
        startLazyRender(filtered);
        restoreScrollPositionIfNeeded();

        updateFilterButtonStates();
      }

      function renderFilters() {
        categoryFiltersRoot.innerHTML = '';
        tagFiltersRoot.innerHTML = '';

        var categories = state.demos
          .map(function (demo) { return demo.category; })
          .filter(function (value, index, arr) { return value && arr.indexOf(value) === index; });

        var sortedCategories = categoryOrder
          .filter(function (category) { return categories.indexOf(category) !== -1; })
          .concat(categories.filter(function (category) { return categoryOrder.indexOf(category) === -1; }));

        if (sortedCategories.length > 0) {
          var categoryLabel = document.createElement('strong');
          categoryLabel.textContent = 'Categories: ';
          categoryFiltersRoot.appendChild(categoryLabel);
        }

        sortedCategories.forEach(function (category) {
          var btn = createFilterButton(category, function () {
            state.category = category;
            trackEvent('filter_used', { filter: 'category', value: category });
            updateURLFromFilter();
            renderDemos();
          });
          btn.setAttribute('data-filter-type', 'category');
          btn.setAttribute('data-filter-value', category);
          categoryFiltersRoot.appendChild(btn);
        });

        var tags = state.demos.reduce(function (acc, demo) {
          (demo.tags || []).forEach(function (tag) {
            if (acc.indexOf(tag) === -1) {
              acc.push(tag);
            }
          });
          return acc;
        }, []).sort();

        if (tags.length > 0) {
          var tagLabel = document.createElement('strong');
          tagLabel.textContent = 'Tags: ';
          tagFiltersRoot.appendChild(tagLabel);
        }

        tags.forEach(function (tag) {
          var btn = createFilterButton(tag, function () {
            state.tag = tag;
            trackEvent('filter_used', { filter: 'tag', value: tag });
            updateURLFromFilter();
            renderDemos();
          });
          btn.setAttribute('data-filter-type', 'tag');
          btn.setAttribute('data-filter-value', tag);
          tagFiltersRoot.appendChild(btn);
        });

        showAllBtn.addEventListener('click', function () {
          resetAllFilters();
          trackEvent('filter_used', { filter: 'show_all', value: '' });
          renderDemos();
        });

        updateFilterButtonStates();
      }

      function bindSearch() {
        if (!searchInput) return;

        searchInput.addEventListener('input', function () {
          state.query = searchInput.value.trim();
          if (state.query !== state.lastTrackedSearch) {
            trackEvent('search_performed', { query: state.query });
            state.lastTrackedSearch = state.query;
          }
          updateURLFromFilter();
          renderDemos();
        });
      }

      function bindSolutionCategories() {
        solutionCategoryButtons.forEach(function (button) {
          button.addEventListener('click', function () {
            var requestedCategory = button.getAttribute('data-solution-category');
            var fallbackCategory = button.getAttribute('data-solution-fallback');
            var hasRequestedCategory = state.demos.some(function (demo) {
              return demo.category === requestedCategory;
            });
            var targetCategory = hasRequestedCategory ? requestedCategory : fallbackCategory || requestedCategory;
            var existingCategoryBtn = document.querySelector('[data-filter-type="category"][data-filter-value="' + targetCategory + '"]');

            if (existingCategoryBtn) {
              existingCategoryBtn.click();
              return;
            }

            state.category = targetCategory;
            trackEvent('filter_used', { filter: 'category', value: targetCategory });
            updateURLFromFilter();
            renderDemos();
          });
        });
      }

      showLoadingState();
      bindScrollPersistence();

      fetch('./demos.json', { credentials: 'same-origin' })
        .then(function (response) {
          if (!response.ok) {
            throw new Error(response.status + ' ' + response.statusText);
          }
          return response.json();
        })
        .then(function (demos) {
          state.demos = demos;
          state.comparisonPaths = state.comparisonPaths.filter(function (path) {
            return demos.some(function (demo) { return demo.path === path; });
          });
          applyFilterFromURL();
          applySavedSessionState(loadSessionState());
          renderFilters();
          bindSolutionCategories();
          bindSearch();
          renderDemos();
        })
        .catch(function (error) {
          statusBox.style.display = 'block';
          statusBox.innerHTML = '<p style="margin: 0;">Failed to load demos.</p>';
          console.warn('[demos] Failed to load demos.json', error);
        });
    })();
  </script>

  <script src="/assets/js/nav-active.js"></script>
</body>

</html>




